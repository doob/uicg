---
import Button from '../../../cli/src/components/Button/button.astro'

import { Image } from 'astro:assets'

const { data } = Astro.props
const { title = data.title, tagline, image, actions = [] } = data || {}

const imageAttrs = {
  loading: 'eager' as const,
  decoding: 'async' as const,
  width: 1200,
  height: 400,
  alt: image?.alt || '',
}

let darkImage: ImageMetadata | undefined
let lightImage: ImageMetadata | undefined
let rawHtml: string | undefined

if (image) {
  if ('file' in image) {
    darkImage = image.file
  } else if ('dark' in image) {
    darkImage = image.dark
    lightImage = image.light
  } else {
    rawHtml = image.html
  }
}
---

<div
  class:list={{
    'relative mx-auto overflow-hidden rounded-3xl sm:px-6 lg:px-8': true,
  }}
>
  <!-- {rawHtml && <div class="hero-html sl-flex" set:html={rawHtml} />} -->
  <div class="absolute z-10 m-10 flex flex-col">
    <h1 id={'PAGE_TITLE_ID'} data-page-title set:html={title} />
    {tagline && <div class="tagline" set:html={tagline} />}

    {
      actions.length > 0 && (
        <div class="mt-4 flex gap-4 align-middle">
          {actions.map(({ text, ...attrs }) => (
            <Button {...attrs} set:html={text} />
          ))}
        </div>
      )
    }
  </div>
  <Image
    src={darkImage}
    {...imageAttrs}
    class="opacity-20 bg-blend-darken blur-xl"
    class:list={{
      'light:sl-hidden absolute': Boolean(lightImage),
    }}
  />
</div>
